---
title: Migrate from ASP.NET Core 7.0 to 8.0
author: rick-anderson
description: Learn how to migrate an ASP.NET Core 6 project to ASP.NET Core 8.0
ms.author: riande
ms.date: 10/13/2022
uid: migration/70-to-80
---
# Migrate from ASP.NET Core 7.0 to 8.0

This article explains how to update an existing ASP.NET Core 7.0 project to ASP.NET Core 8.0

## Prerequisites

# [Visual Studio](#tab/visual-studio)

[!INCLUDE[](~/includes/net-prereqs-vs-8.0.md)]

# [Visual Studio Code](#tab/visual-studio-code)

[!INCLUDE[](~/includes/net-prereqs-vsc-8.0.md)]

# [Visual Studio for Mac](#tab/visual-studio-mac)

[!INCLUDE[](~/includes/net-prereqs-mac-8.0.md)]

---

## Update .NET Core SDK version in global.json

If you rely on a [global.json](/dotnet/core/tools/global-json) file to target a specific .NET Core SDK version, update the `version` property to the .NET 8.0 SDK version that's installed. For example:

```diff
{
  "sdk": {
-    "version": "6.0.200"
+    "version": "8.0.100"
  }
}
```

## Update the target framework

Update the project file's [Target Framework Moniker (TFM)](/dotnet/standard/frameworks) to `net8.0`:

```diff
<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
-    <TargetFramework>net7.0</TargetFramework>
+    <TargetFramework>net8.0</TargetFramework>
  </PropertyGroup>

</Project>
```

## Update package references

In the project file, update each [Microsoft.AspNetCore.*](https://www.nuget.org/packages?q=Microsoft.AspNetCore.*), [Microsoft.EntityFrameworkCore.*](https://www.nuget.org/packages?q=Microsoft.EntityFrameworkCore.*), [Microsoft.Extensions.*](https://www.nuget.org/packages?q=Microsoft.Extensions.*), and [System.Net.Http.Json](https://www.nuget.org/packages/System.Net.Http.Json) package reference's `Version` attribute to 8.00 or later. For example:

```diff
<ItemGroup>
-   <PackageReference Include="Microsoft.AspNetCore.JsonPatch" Version="8.0.0" />
-   <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="8.0.0" />
-   <PackageReference Include="Microsoft.Extensions.Caching.Abstractions" Version="8.0.0" />
-   <PackageReference Include="System.Net.Http.Json" Version="8.0.0" />
+   <PackageReference Include="Microsoft.AspNetCore.JsonPatch" Version="8.0.0" />
+   <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="8.0.0">
+   <PackageReference Include="Microsoft.Extensions.Caching.Abstractions" Version="8.0.0" />
+   <PackageReference Include="System.Net.Http.Json" Version="8.0.0" />
</ItemGroup>
```

## Blazor

The following migration scenarios are covered:

* [Update a Blazor Server app](#update-a-blazor-server-app)
* [Add Auto component rendering to a Blazor Server app](#add-auto-component-rendering-to-a-blazor-server-app)
* [Update a Blazor WebAssembly app](#update-a-blazor-webassembly-app)
* [Update a hosted Blazor WebAssembly app](#update-a-hosted-blazor-webassembly-app)

For scenarios not covered or to convert the app into a Blazor Web App, we recommend the following process:

* Create a new app from the Blazor Web App project template. For more information, see <xref:blazor/tooling>.
* Move the your app's components and code to the new Blazor Web App app, making modifications to adopt [8.0 features](xref:aspnetcore-8#blazor).

### Update a Blazor Server app

Blazor Server apps are supported in .NET 8. Use the following guidance to update a Blazor Server app to .NET 8, which makes all of the [new .NET 8 features](xref:aspnetcore-8#blazor) available.

> [!NOTE]
> This section focuses on the minimal changes required to update a Blazor Server app to .NET 8. The guidance in this section doesn't cover adoption of the Blazor Web App project template folder and file layout structure, nor does it adhere to new layout, error UI, navigation menu, stylesheet, and other changes introduced for Blazor Web Apps. To adopt all of the introduced changes and recommended best practices, convert the Blazor Server app into a Blazor Web App by following the guidance in the [Adopt all .NET 8 project template changes](#adopt-all-net-8-project-template-changes) section. 

1. Follow the guidance in the first three sections of this article:

   * [Update .NET Core SDK version in global.json](#update-net-core-sdk-version-in-globaljson)
   * [Update the target framework](#update-the-target-framework)
   * [Update package references](#update-package-references)

1. Move the contents of the `App` component (`App.razor`) to a new `Routes` component file (`Routes.razor`) added to the app. Leave the empty `App.razor` file in the app.

1. Add an entry to the `_Imports.razor` file to make shorthand render modes available to the app:

   ```razor
   @using static Microsoft.AspNetCore.Components.Web.RenderMode
   ```

1. Move the content in the `_Host` page (`Pages/_Host.cshtml`) to the empty `App.razor` file and delete the `Pages/_Host.cshtml` file. Proceed to make the following changes to the `App` component.

   > [!NOTE]
   > In the following example, the app's namespace is `Net8BlazorServer`.

   Remove the following lines from the top of the file:

   ```diff
   - @page "/"
   - @using Microsoft.AspNetCore.Components.Web
   - @namespace Net8BlazorServer.Pages
   - @addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
   ```
   
   Replace the preceding lines with the following:

   ```razor
   @inject IHostEnvironment Env
   ```

   Remove the tilde (`~`) from the value of `href` for the `<base>` tag:

   ```diff
   - <base href="~/" />
   + <base href="/" />
   ```

   Remove the Component Tag Helper for the `HeadOutlet` component:

   ```diff
   - <component type="typeof(HeadOutlet)" render-mode="ServerPrerendered" />
   ```

   Replace the tag helper with the following line:

   ```razor
   <HeadOutlet @rendermode="RenderMode.InteractiveServer" />
   ```

   Remove the Component Tag Helper for the `App` component:

   ```diff
   - <component type="typeof(App)" render-mode="ServerPrerendered" />
   ```

   Replace the tag helper with the following line:

   ```razor
   <Routes @rendermode="RenderMode.InteractiveServer" />
   ```

   Remove the Environment Tag Helpers for error UI:

   ```diff
   - <environment include="Staging,Production">
   -     An error has occurred. This application may no longer respond until reloaded.
   - </environment>
   - <environment include="Development">
   -     An unhandled exception has occurred. See browser dev tools for details.
   - </environment>
   ```

   Replace the tag helpers with the following lines:

   ```razor
   @if (Env.IsDevelopment())
   {
       <text>An unhandled exception has occurred. See browser dev tools for details.</text>
   }
   else
   {
       <text>An error has occurred. This application may no longer respond until reloaded.</text>
   }
   ```

   Change the Blazor script from `blazor.server.js` to `blazor.web.js`:

   ```diff
   - <script src="_framework/blazor.server.js"></script>
   + <script src="_framework/blazor.web.js"></script>
   ```

1. Update `Program.cs`:

   > [!NOTE]
   > In the following example, the app's namespace is `Net8BlazorServer`.

   Add a `using` statement for the app's namespace:

   ```csharp
   using Net8BlazorServer;
   ```
  
   Replace `AddServerSideBlazor` with `AddRazorComponents` and a chained call to `AddInteractiveServerComponents`.
   
   Remove the following line:

   ```diff
   - builder.Services.AddServerSideBlazor();
   ```

   Replace the line with the following lines:

   ```csharp
   builder.Services.AddRazorComponents()
       .AddInteractiveServerComponents();
   ```

   Replace `MapBlazorHub` with `MapRazorComponents`, supplying the `App` component as the root component type, and a chained call to `AddInteractiveServerRenderMode`.
   
   Remove the following line:
  
   ```diff
   - app.MapBlazorHub();
   ```

   Replace the line with the following lines:

   ```csharp
   app.MapRazorComponents<App>()
       .AddInteractiveServerRenderMode();
   ```

   Remove the following line:
   
   ```diff
   - app.MapFallbackToPage("/_Host");
   ```

1. If the Blazor Server app was configured to disable prerendering, you can continue to disable prerendering for the updated app. In the `App` component, change the value assigned to the `@rendermode` Razor directive attributes for the `HeadOutlet` and `Routes` components:

   ```diff
   - @rendermode="RenderMode.InteractiveServer"
   + @rendermode="new InteractiveServerRenderMode(prerender: false)"
   ```

   For more information, see <xref:blazor/components/render-modes?view=aspnetcore-8.0&preserve-view=true#prerendering>.

1. Razor components in the app should adopt either static or interactive server rendering. Render modes can be applied to the app's components either at the level of a component definition (`.razor` file) or where a component instance is used in Razor markup. For guidance on applying render modes, see <xref:blazor/components/render-modes>.

### Add Auto component rendering to a Blazor Server app

This section covers adding WebAssembly-based components to a Blazor Server app after upgrading to .NET 8.

Use the following process:

1. Follow the guidance in the [Update a Blazor Server app](#update-a-blazor-server-app).

<!-- UPDATE 8.0 RTM - The name of 'Interactivity type' will change to
                'Interactive render mode' -->

1. Create a donor Blazor Web App, which will provide assets to the Blazor Server app. Follow the guidance in the <xref:blazor/tooling> article, selecting support for the following template features when generating the Blazor Web App.

   For the app's name, use the same name as the Blazor Server app, which results in matching name and namespaces.

   * Interactivity type: Select **Auto (Server and WebAssembly)** for Visual Studio or use the `-int Auto` option if using the .NET CLI.
   * Interactivity location: Use either **Global** or **Per page/component** for Visual Studio or don't pass the `-ai|--all-interactive` option if using the .NET CLI.

1. From the donor Blazor Web App, drag the entire `.Client` project into the solution folder of the Blazor Server app.

1. Add the `.Client` project to the solution:

   In Visual Studio, right-click the solution in **Solution Explorer** and select **Add** > **Existing Project**. Navigate to the `.Client` folder and select the project file (`.csproj`).

   If using the .NET CLI, use the [`dotnet sln add` command](/dotnet/core/tools/dotnet-sln#add) to add the `.Client` project to the Blazor Server's solution.

1. If you want to make all of the solution's developer-created Razor components adopt the Auto render mode, configure global interactive Auto render mode on the `HeadOutlet` and `Routes` components in the Blazor Server project's `App` component (`Components/App.razor`):

   ```razor
   <HeadOutlet @rendermode="RenderMode.InteractiveAuto" />

   ...

   <Routes @rendermode="RenderMode.InteractiveAuto" />
   ```

   If you prefer to set the render modes of component definitions and instances on each component, don't set a global render mode on the `HeadOutlet` and `Routes` components:

   ```razor
   <HeadOutlet />

   ...

   <Routes />
   ```

1. Add the `.Client` project's namespace to the Blazor Server project by adding a `using` statement to the Blazor Server project's `_Imports.razor` file. In the following example, the project's namespace is `Net8BlazorServer`:

   ```razor
   @using Net8BlazorServer.Client
   ```

1. If you made all of the solution's developer-created Razor components adopt the Auto render mode in the `App` component earlier, move all of the Blazor Server's developer-created components in the `Components/Pages` pages folder to the `.Client` project's `Pages` folder. Create a `Shared` folder in the `.Client` project for shared components. It isn't necessary to set a render mode in each component definition or instance.

  If you left it up to each component to set its render mode, apply the render modes according to the guidance in the <xref:blazor/components/render-modes> article.

### Update a Blazor WebAssembly app

Follow the guidance in the first three sections of this article:

* [Update .NET Core SDK version in global.json](#update-net-core-sdk-version-in-globaljson)
* [Update the target framework](#update-the-target-framework)
* [Update package references](#update-package-references)

Adopt [8.0 features](xref:aspnetcore-8#blazor).

### Update a hosted Blazor WebAssembly app

*************************************************************
**** This section is a WIP: Will pick back up on Monday! ****
*************************************************************

To upgrade an existing ASP.NET Core hosted Blazor WebAssembly app to .NET 8:

1. Follow the guidance in the first three sections of this article:

   * [Update .NET Core SDK version in global.json](#update-net-core-sdk-version-in-globaljson)
   * [Update the target framework](#update-the-target-framework)
   * [Update package references](#update-package-references)

1. Move content from `Client/wwwroot/index.html` to `Host.razor` (commit):

   * Update script to `blazor.web.js`.
   * Replace `<title>` tag with `HeadOutlet` component.

1. Update `Client/Program.cs` (commit): Remove `builder.RootComponents.Add<HeadOutlet>("head::after")`.
   
1. Update `Server/Program.cs` (commit):

   * Add `builder.Services.AddRazorComponents().AddInteractiveWebAssemblyComponents()`.
   * Remove `app.UseBlazorFrameworkFiles()`.
   * Replace `MapFallbackToFile("index.html")` with `app.MapRazorComponents<Host>().AddInteractiveWebAssemblyRenderMode()`.

To enable prerendering:

* Update all components to support prerendering from the server (commit).

* In `Host.razor` replace the `id=app` tag with `<App @rendermode="RenderMode.WebAssembly" />` (commit).


### Adopt all .NET 8 project template changes

To adopt all of the changes that were made to the project templates for this release, we recommend the following process:

* Create a new 8.0 Blazor project from one of the Blazor project templates. For more information, see <xref:blazor/tooling>.
* Move the app's components and code to the new app, making modifications to adopt [8.0 features](xref:aspnetcore-8#blazor).

## Update Docker images

For apps using Docker, update your *Dockerfile* `FROM` statements and scripts. Use a base image that includes the ASP.NET Core 8.0 runtime. Consider the following `docker pull` command difference between ASP.NET Core 7.0 and 8.0:

```diff
- docker pull mcr.microsoft.com/dotnet/aspnet:7.0
+ docker pull mcr.microsoft.com/dotnet/aspnet:8.0
```

## Review breaking changes

For breaking changes from .NET Core .NET 7.0 to 8.0, see [Breaking changes in .NET 8](/dotnet/core/compatibility/8.0), which includes [ASP.NET Core](/dotnet/core/compatibility/8.0#aspnet-core) and [Entity Framework Core](/dotnet/core/compatibility/8.0#entity-framework-core) sections.
